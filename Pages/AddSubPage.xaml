<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="MauiApp2.Pages.AddSubPage"
             Title="Add Subject"
             Shell.NavBarIsVisible="False"
             xmlns:viewmodel="clr-namespace:MauiApp2.ViewModel"
             xmlns:model="clr-namespace:MauiApp2.Model2"
             x:DataType="viewmodel:AddSubViewModel">

    <!-- Binding Context -->
    <ContentPage.BindingContext>
        <viewmodel:AddSubViewModel/>
    </ContentPage.BindingContext>

    <!-- Layout -->
    <Grid RowDefinitions="Auto,Auto,Auto,*">
        <!-- Background Image -->
        <Image Source="bgtwo.png"
               Aspect="AspectFill"
               HorizontalOptions="Fill"
               VerticalOptions="Fill"
               Grid.RowSpan="4"/>

        <!-- à¸ªà¹ˆà¸§à¸™à¸šà¸™à¸ªà¸¸à¸”: à¸›à¸¸à¹ˆà¸¡, à¸Šà¸·à¹ˆà¸­à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰, à¹à¸¥à¸°à¸Šà¹ˆà¸­à¸‡à¸„à¹‰à¸™à¸«à¸² -->
        <Grid Grid.Row="0"
              ColumnDefinitions="*,*"
              Padding="20,10"
              BackgroundColor="Transparent">
            <!-- à¸›à¸¸à¹ˆà¸¡ Back -->
            <Button Text="ðŸ”™ à¸à¸¥à¸±à¸š"
                    Command="{Binding GoBackCommand}"
                    BackgroundColor="#FFB01F1F"
                    TextColor="White"
                    FontSize="16"
                    FontAttributes="Bold"
                    CornerRadius="25"
                    WidthRequest="100"
                    HeightRequest="40"
                    HorizontalOptions="Start">
                <Button.Shadow>
                    <Shadow Brush="#40000000"
                            Offset="3,3"
                            Radius="5"/>
                </Button.Shadow>
            </Button>

            <!-- à¸›à¸¸à¹ˆà¸¡ Confirm Selection -->
            <Button Text="âœ… à¸¢à¸·à¸™à¸¢à¸±à¸™à¸à¸²à¸£à¸¥à¸‡à¸—à¸°à¹€à¸šà¸µà¸¢à¸™"
                    Command="{Binding ConfirmSelectionCommand}"
                    BackgroundColor="#FF3F8F3F"
                    TextColor="White"
                    FontSize="16"
                    FontAttributes="Bold"
                    CornerRadius="25"
                    WidthRequest="200"
                    HeightRequest="40"
                    HorizontalOptions="End"
                    Grid.Column="1">
                <Button.Shadow>
                    <Shadow Brush="#40000000"
                            Offset="3,3"
                            Radius="5"/>
                </Button.Shadow>
            </Button>
        </Grid>

        <!-- à¸Šà¸·à¹ˆà¸­à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰ -->
        <Label Grid.Row="1"
               Text="{Binding LoggedInUserName, StringFormat='ðŸ‘¤ à¸Šà¸·à¹ˆà¸­à¸™à¸´à¸ªà¸´à¸•: {0}'}"
               FontSize="24"
               FontAttributes="Bold"
               TextColor="#FF494848"
               HorizontalOptions="Center"
               Margin="0,10,0,20">
            <Label.Shadow>
                <Shadow Brush="#40000000"
                        Offset="2,2"
                        Radius="4"/>
            </Label.Shadow>
        </Label>

        <!-- à¸Šà¹ˆà¸­à¸‡à¸„à¹‰à¸™à¸«à¸² -->
        <SearchBar Grid.Row="2"
                   Placeholder="ðŸ” à¸„à¹‰à¸™à¸«à¸²à¸£à¸²à¸¢à¸§à¸´à¸Šà¸²à¸”à¹‰à¸§à¸¢à¸£à¸«à¸±à¸ªà¸§à¸´à¸Šà¸²"
                   Text="{Binding SearchQuery, Mode=TwoWay}"
                   SearchCommand="{Binding SearchCommand}"
                   BackgroundColor="#80FFFFFF"
                   TextColor="Black"
                   PlaceholderColor="Gray"
                   HorizontalOptions="Fill"
                   Margin="20,10,20,10">
            <SearchBar.Shadow>
                <Shadow Brush="#40000000"
                        Offset="2,2"
                        Radius="4"/>
            </SearchBar.Shadow>
        </SearchBar>

        <!-- à¸ªà¹ˆà¸§à¸™à¸‚à¹‰à¸­à¸¡à¸¹à¸¥: à¸£à¸²à¸¢à¸§à¸´à¸Šà¸²à¸—à¸µà¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¸¥à¸‡à¸—à¸°à¹€à¸šà¸µà¸¢à¸™à¹„à¸”à¹‰ (à¸ªà¸²à¸¡à¸²à¸£à¸–à¹€à¸¥à¸·à¹ˆà¸­à¸™à¹„à¸”à¹‰) -->
        <ScrollView Grid.Row="3"
                    Padding="20">
            <VerticalStackLayout Spacing="15">
                <!-- à¸«à¸±à¸§à¸‚à¹‰à¸­à¸£à¸²à¸¢à¸§à¸´à¸Šà¸²à¸—à¸µà¹ˆà¹€à¸›à¸´à¸”à¸ªà¸­à¸™ -->
                <Label Text="ðŸ“š à¸£à¸²à¸¢à¸§à¸´à¸Šà¸²à¸—à¸µà¹ˆà¹€à¸›à¸´à¸”à¸ªà¸­à¸™"
                       FontSize="25"
                       FontAttributes="Bold"
                       TextColor="#FF494848">
                    <Label.Shadow>
                        <Shadow Brush="#40000000"
                                Offset="2,2"
                                Radius="4"/>
                    </Label.Shadow>
                </Label>

                <!-- à¹à¸ªà¸”à¸‡à¸£à¸²à¸¢à¸§à¸´à¸Šà¸²à¸—à¸µà¹ˆà¹€à¸›à¸´à¸”à¸ªà¸­à¸™ -->
                <CollectionView ItemsSource="{Binding FilteredCourses}">
                    <CollectionView.ItemTemplate>
                        <DataTemplate x:DataType="model:Courses">
                            <Border BackgroundColor="#805B3A3A"
                                    StrokeShape="RoundRectangle 15,15,15,15"
                                    Padding="15"
                                    Margin="0,0,0,10">
                                <Border.Shadow>
                                    <Shadow Brush="#40000000"
                                            Offset="3,3"
                                            Radius="5"/>
                                </Border.Shadow>
                                <Grid>
                                    <VerticalStackLayout>
                                        <Label Text="{Binding CourseId, StringFormat='ðŸ†” à¸£à¸«à¸±à¸ªà¸§à¸´à¸Šà¸²: {0}'}"
                                               FontSize="18"
                                               TextColor="White"/>
                                        <Label Text="{Binding CourseName, StringFormat='ðŸ“– à¸Šà¸·à¹ˆà¸­à¸§à¸´à¸Šà¸²: {0}'}"
                                               FontSize="18"
                                               TextColor="White"/>
                                        <Label Text="{Binding Credit, StringFormat='ðŸ“– à¸«à¸™à¹ˆà¸§à¸¢à¸à¸´à¸•: {0}'}"
                                               FontSize="18"
                                               TextColor="White"/>
                                    </VerticalStackLayout>
                                    <!-- CheckBox à¸ªà¸³à¸«à¸£à¸±à¸šà¹€à¸¥à¸·à¸­à¸à¸£à¸²à¸¢à¸§à¸´à¸Šà¸² -->
                                    <CheckBox IsChecked="{Binding IsSelected, Mode=TwoWay}"
                                              HorizontalOptions="End"
                                              VerticalOptions="Center"
                                              Color="#00FF00"/>
                                </Grid>
                            </Border>
                        </DataTemplate>
                    </CollectionView.ItemTemplate>
                </CollectionView>
            </VerticalStackLayout>
        </ScrollView>
    </Grid>
</ContentPage>